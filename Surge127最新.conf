# 配置名称: Surge 自用配置
# 配置作者: wmsxwdsh
# 适用版本：iOS/macOS 通用
# 更新时间: 2024-09-16

# 官方手册 - https://manual.nssurge.com/
# 理解原理 - https://manual.nssurge.com/book/understanding-surge/cn/
# 帮助中心 - https://nssurge.zendesk.com/
# 技术社区 - https://community.nssurge.com

[General]
# > Internet 测试 URL
internet-test-url = http://www.apple.com/library/test/success.html
# internet-test-url = http://connect.rom.miui.com/generate_204

# > 代理测速 URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# proxy-test-url = http://www.gstatic.com/generate_204
# proxy-test-url = https://translate.google.cn/generate_204
# proxy-test-url = http://1.1.1.1

# > 测试超时（秒）
test-timeout = 2

# > WiFi 助理
#（在 Wi-Fi 网络不佳时尝试使用数据网络建立连接，请仅当使用不限量的数据流量时开启）
wifi-assist = false

# > All Hybrid 网络并发
# > 开启后，等同于对所有策略设置 hybrid = true，所有 TCP 连接在建立时均会并发尝试数据网络和 WiFi 连接。
# > 除此之外，所有 DNS 查询操作也都将并发在数据网络和 WiFi 上进行。所以若想体验该功能，请手动配置公网 DNS，暂不支持 DOH。
all-hybrid = false

# UDP 优先级
udp-priority = false

# > GeoIP 数据库
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb

# > 是否启动完整的 IPv6 支持 (默认值: false)
#（如无特殊需求不应开启 IPv6，目前网络环境下 IPv6 只会带来问题。）
ipv6 = false
# > Surge VIF IPv6 Stack
# > 允许 IPv6 通过 Surge VIF，当希望 Surge 处理连接到 IPv6 地址的原始 TCP 连接时非常有用。
# > 可选项：true，false，auto，always
ipv6-vif = auto

# > 允许 Wi-Fi 访问 (仅 iOS，若允许远程访问将「false」改为「true」)
# > Surge 作为 HTTP/SOCKS5 代理服务器向 Wi-Fi 网络下的其他设备提供服务器
allow-wifi-access = false
# > Surge Mac 供外网访问的服务端口
wifi-access-http-port = 6152
# > SOCKS5 服务端口 (默认值: 6153)
wifi-access-socks5-port = 6153

# > Surge iOS 供外网访问的服务端口
http-listen = 127.0.0.1:6152
# > SOCKS5 服务端口 (默认值: 6153)
socks5-listen = 127.0.0.1:6153

# > 允许热点共享
allow-hotspot-access = false
# > 兼容性（仅 iOS 版可用）
compatibility-mode = 0

# > 跳过某个域名或者 IP 段，这些目标主机将不会由 Surge Proxy 处理。
# > (macOS 版本中，如果启用了 Set as System Proxy, 这些值会被写入到系统网络代理设置.)
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local, seed-sequoia.siri.apple.com, sequoia.siri.apple.com, sequoia.apple.com, passenger.t3go.cn, www.baidu.com, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, www.shanbay.com, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com
# > 排除简单主机名
exclude-simple-hostnames = true

# > 强制使用特定的 DNS 服务器
#（119 腾讯，180 字节跳动，223 阿里云）
dns-server = 119.29.29.29, 180.184.1.1, 223.5.5.5, system
# > DNS 设置
# > 从 /etc/hosts 读取 DNS 记录
read-etc-hosts = true

# > 高级
# > 日志等级: warning, notify, info, verbose (默认值: notify)
loglevel = notify
# > 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true

# > Always Real IP Hosts
# > 当 Surge VIF 处理 DNS 问题时，此选项要求 Surge 返回一个真正的 IP 地址，而不是一个假 IP 地址。
# > DNS 数据包将被转发到上游 DNS 服务器。
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com

# > Hijack DNS
# > 默认情况下，Surge 只返回发送到 Surge DNS 地址的 DNS 查询的假 IP 地址(198.18.0.2)。
# > 有些设备或软件总是使用硬编码的 DNS 服务器。 (例如 Google Speakers 总是使用 8.8.8.8)。
# > 您可以使用此选项劫持查询，以获得一个假地址。
hijack-dns = *:53

# > VIF Excluded Routes
# > Surge VIF 只能处理 TCP 和 UDP 协议。使用此选项可以绕过特定的 IP 范围，允许所有流量通过。
; tun-excluded-routes = 239.255.255.250/32

# > 新增参数 udp-policy-not-supported-behaviour 参数用于控制当 UDP 流量被匹配到一个不支持 UDP 转发的策略时的行为
# > DIRECT：回退到 DIRECT 策略（默认）
# > REJECT：回退到 REJECT 策略
udp-policy-not-supported-behaviour = REJECT

# > 默认向 8.8.8.8 查询 apple.com，可使用 proxy-test-udp 参数修改，如 proxy-test-udp = google.com@1.1.1.1
proxy-test-udp = apple.com@8.8.8.8

# > 隐藏状态栏上的 VPN 图标
hide-vpn-icon = false

[Proxy]
🧩 国内直连 = direct
# 广告拦截 = reject

[Proxy Group]
# update-interval 更新时间，单位 秒, 默认更新时间为 24*60*60=86400 秒（24 小时）

# > 一个机场
机场1 = select, update-interval=86400, policy-path=, hidden=true
订阅链接 = select, include-other-group="机场1", hidden=true
# > 多个机场
# 机场1 = select, update-interval=0, policy-path=, hidden=1
# 机场2 = select, update-interval=0, policy-path=, hidden=1
# 机场3 = select, update-interval=0, policy-path=, hidden=1
# 订阅链接 = select, include-other-group="机场1,机场2,机场3"

; 🌍 冷门节点 = select, include-other-group=订阅链接, update-interval=0, policy-regex-filter=^((?!(港|台|日本|新|美|HK|TW|JP|SG|US|直连|广告|到期|流量|剩余)).)*$, hidden=false
🌍 冷门节点 = select, include-other-group=订阅链接, update-interval=0, policy-regex-filter=^(?!.*(距离|重置|过期|到期|剩余|GB|Traffic|Expire|香港|HK|HKG|Hong Kong|台湾|TW|TWN|Taiwan|日本|JP|JPN|Japan|美国|US|USA|United States|新加坡|狮城|SG|SGP|Singapore)), hidden=false
香港节点 = url-test, include-other-group=订阅链接, update-interval=0, policy-regex-filter=(香港|HK|HKG|Hong Kong), hidden=false
日本节点 = url-test, include-other-group=订阅链接, update-interval=0, policy-regex-filter=(日本|JP|JPN|Japan), hidden=false
狮城节点 = url-test, include-other-group=订阅链接, update-interval=0, policy-regex-filter=(新加坡|狮城|SG|SGP|Singapore), hidden=false
美国节点 = url-test, include-other-group=订阅链接, update-interval=0, policy-regex-filter=(美国|US|USA|United States), hidden=false
台湾节点 = url-test, include-other-group=订阅链接, update-interval=0, policy-regex-filter=(台湾|TW|TWN|Taiwan), hidden=false

🚀️ 法外狂徒 = select, 香港节点, 日本节点, 台湾节点, 狮城节点, 美国节点, 🌍 冷门节点

苹果服务 = select, 🧩 国内直连, 🚀️ 法外狂徒
微软服务 = select, 🧩 国内直连, 🚀️ 法外狂徒

电报代理 = select, 狮城节点, 日本节点, 🚀️ 法外狂徒
国际媒体 = select, 狮城节点, 台湾节点, 🚀️ 法外狂徒

美国专场 = select, 美国节点, 🚀️ 法外狂徒
台湾专场 = select, 台湾节点, 🚀️ 法外狂徒

游戏玩家 = select, 🚀️ 法外狂徒, 🧩 国内直连
黑白名单 = select, 🚀️ 法外狂徒, 🧩 国内直连

Means Nothing  = select, 🧩 国内直连

[Rule]
DEST-PORT,123,🧩 国内直连
RULE-SET, https://raw.githubusercontent.com/wmsxwdsh/ClashSub/main/myList/AddDirect.list, 🧩 国内直连
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list, 🧩 国内直连

RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list, 苹果服务
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list, 微软服务

RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list, 电报代理

# 国际媒体：Netflix、DisneyPlus
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list, 国际媒体
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/DisneyPlus.list, 国际媒体

# 美国专场：OpenAI、TikTok
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list, 美国专场
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/TikTok.list, 美国专场

# 台湾专场：Bahamut、HBOAsia、LineTV
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.list, 台湾专场
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOAsia/HBOAsia.list, 台湾专场
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/LineTV/LineTV.list, 台湾专场

# 🚀️ 法外狂徒：YouTube、Google、Wikipedia、GitHub、Shopee、ProxyLite（最后）
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list, 🚀️ 法外狂徒
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list, 🚀️ 法外狂徒
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Wikipedia/Wikipedia.list, 🚀️ 法外狂徒
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list, 🚀️ 法外狂徒
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Shopee/Shopee.list, 🚀️ 法外狂徒

# 游戏玩家：Steam
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list, 🚀️ 法外狂徒

# 最后
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ProxyLite/ProxyLite.list, 🚀️ 法外狂徒
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China, 🧩 国内直连
# RULE-SET,LAN,🧩 国内直连
GEOIP,CN,🧩 国内直连
FINAL,黑白名单,dns-failed


[Host]
mtalk.google.com = 108.177.125.188
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
*.dl.playstation.net = server:119.29.29.29

[Header Rewrite]

[URL Rewrite]
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com header

[Script]

[SSID Setting]

[MITM]
skip-server-cert-verify = true
hostname = www.google.cn